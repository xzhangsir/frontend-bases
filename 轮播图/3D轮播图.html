<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }

    .wrapper {
      position: relative;
      transform-style: preserve-3d;
      perspective: 800px;
      height: 200px;
      margin-top: 200px;
    }

    .wrapper img {
      position: absolute;
      left: 50%;
      top: 50%;
      width: 300px;
      height: 200px;
      margin-left: -150px;
      margin-top: -100px;
      border-radius: 8px;
      transition: transform 0.5s ease-in-out;
    }
  </style>
  <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>

</head>

<body>
  <div class="wrapper" id="wrap">
    <img src="./1.jpg" alt="">
    <img src="./2.jpg" alt="">
    <img src="./3.jpg" alt="">
    <img src="./4.jpg" alt="">
    <img src="./5.jpg" alt="">
  </div>
  <script>
    function init() {
      initalCarousel();
      bindEvent();
    }
    var $img = $('img');
    var imgLen = $('img').length;
    var wrap = $('.wrapper');
    var curDisplay = 0;
    var flag = true;
    var timer;
    var interval = 1500;
    var nowIndex = 0;
    // 按照索引将
    function initalCarousel() {
      var hLen = Math.floor(imgLen / 2);
      var lNum, rNum;
      for (var i = 0; i < hLen; i++) {
        lNum = curDisplay - i - 1;
        $img.eq(lNum).css({
          transform: 'translateX(' + (-150 * (i + 1)) + 'px) translateZ(' + (200 - i * 100) + 'px) rotateY(30deg)'
        })
        rNum = curDisplay + i + 1;
        if (rNum > imgLen - 1) {
          rNum -= imgLen;
        }
        $img.eq(rNum).css({
          transform: 'translateX(' + (150 * (i + 1)) + 'px) translateZ(' + (200 - i * 100) + 'px) rotateY(-30deg)'
        });
        $img.removeClass('on');
      }
      $img.eq(curDisplay).css({
        transform: 'translateZ(300px)'
      }).addClass('on');
      wrap.on('transitionend', function () {
        flag = true;
      })
    };
    function bindEvent() {
      $img.on('click', function (e) {
        if (flag && !$(this).hasClass('on')) {
          flag = false;
          nowIndex = $(this).index();
          moving(nowIndex);
        }
      }).hover(function () {
        clearInterval(timer);
      }, function () {
        timer = setInterval(function () {
          play();
        }, interval);
      });
      timer = setInterval(function () {
        play();
      }, interval);
    }
    function play() {
      if (nowIndex == imgLen - 1) {
        nowIndex = 0;
      } else {
        nowIndex++;
      }
      moving(nowIndex);
    }
    function moving(index) {
      curDisplay = index;
      initalCarousel();
    }
    init();

  </script>
</body>

</html>