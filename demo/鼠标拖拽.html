<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }

    .low {
      width: 100px;
      height: 100px;
      background: #f99;
      position: absolute;
      cursor: move;
    }
  </style>
</head>

<body>
  <div class="low"></div>
  <script>
    function $(selector) {
      var result = document.querySelectorAll(selector);
      if (result.length && result.length != 1) {
        return result;
      } else {
        return result[0];
      }
    }
    $('.low').onmousedown = function (e) {

      var _this = this;
      var newDiv = this.cloneNode(true);
      newDiv.style.opcity = 0.5;
      $('body').appendChild(newDiv);

      var divX = e.offsetX;
      var divY = e.offsetY;

      window.onmousemove = function (e) {
        var divx = e.pageX;
        var divy = e.pageY;
        if (divx - divX < 0) {
          newDiv.style.left = 0;
          return;
        }
        if (divy - divY < 0) {
          newDiv.style.top = 0;
          return;
        }
        if (divx - divX > window.innerWidth - 100) {
          newDiv.style.left = window.innerWidth - 100;
          return;
        }
        if (divy - divY > window.innerHeight - 100) {
          newDiv.style.top = window.innerHeight - 100;
          return;
        }
        newDiv.style.left = divx - divX + 'px';
        newDiv.style.top = divy - divY + 'px';
      }

      window.onmouseup = function (e) {
        _this.style.left = newDiv.style.left;
        _this.style.top = newDiv.style.top;
        this.onmousemove = null;
        this.onmouseup = null;
        newDiv.remove();
      }
    }
  </script>
</body>

</html>